{"version":3,"sources":["../../src/pages/mine/bankcard-add/bankcard-add.ts","../../src/pages/mine/bankcard-add/bankcard-add.module.ts"],"names":[],"mappings":"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","file":"22.js","sourcesContent":["import { Component } from '@angular/core';\nimport {ActionSheet, Alert, AlertController, IonicPage, Loading, Modal, NavController} from 'ionic-angular';\nimport {AddBankCard} from \"../../../providers/messages/user-auth-msg\";\nimport {MineService} from \"../../../providers/user-service/mine-service\";\nimport { TranslateService } from 'ng2-translate';\nimport { CommonUtils} from  '../../../providers/common/commonUtils'\nimport { IentityAuth} from '../../../providers/identity/ientity-auth'\n@IonicPage()\n@Component({\n  selector: 'bankcard-add',\n  templateUrl: 'bankcard-add.html'\n})\nexport class BankcardAddPage {\n  alert:Alert;\n  loading:Loading;\n  modal:Modal;\n  actionSheet:ActionSheet;\n  createSuccess = false;\n\n  addBankCard: any = {account:'',name:'',bankname:'',branchName:'',userId:'11111'};\n  bankCode:string;\n  account1: string;\n  translateObj: any;\n  constructor(public navCtrl: NavController\n                , public mineser:MineService\n                , private alertCtrl: AlertController, public translate:TranslateService,\n              private commonUtils:CommonUtils,private ientityAuth:IentityAuth) {\n      this.translate.get('bankcard_add').subscribe((res: any) => {\n          this.translateObj = res;\n      });\n  }\n  changCardNO(account){\n    console.log(\"监听\");\n      console.log(\"addBankCard\",account);\n      if(account.length==6){\n          this.mineser.bankbinXXCard(account).then(success =>{\n              console.log(success)\n            if(success.ret_code=='1')  {\n                switch (success.data.alias){\n                    case 'BOCOM' :{\n                        this.addBankCard.bankname =\"交通银行\";\n                        break;\n                    }\n                    case 'ICBC' :{\n                        this.addBankCard.bankname =\"工商银行\";\n                        break;\n                    }\n                    case 'ABC' :{\n                        this.addBankCard.bankname =\"农业银行\";\n                        break;\n                    }\n                    case 'CCB' :{\n                        this.addBankCard.bankname =\"建设银行\";\n                        break;\n                    }\n                    case 'BOC' :{\n                        this.addBankCard.bankname =\"中国银行\";\n                        break;\n                    }\n                }\n\n\n            }else{\n                this.addBankCard.bankname =\"\";\n                  //弹出信息 ，12.15 去掉\n                // this.commonUtils.alertCommon('',success.ret_msg);\n            }\n\n            }).catch(err=>{\n                  // this.commonUtils.alertCommon('','网络连接失败,请重试');\n          })\n      }\n  }\n  confirm(){\n\n      let address = /^[\\u4E00-\\u9FA5A-Za-z0-9_]+$/;//中文、英文、数字包括下划线\n\n      let address2 = /^[A-Za-z]+$/;//包含字母\n\n      if(this.addBankCard.account == \"\"){\n          this.showPopup(\"\", this.translateObj.warCardNo);\n          return;\n      }\n      if(this.addBankCard.account.length<15){\n          this.showPopup(\"\", this.translateObj.validate);\n          return;\n      }\n      if(this.addBankCard.account != this.account1){\n          this.showPopup(\"\", this.translateObj.warCardNotSame);\n          return;\n      }\n      // if(this.addBankCard.name == \"\"){\n      //     this.showPopup(\"\", this.translateObj.warOwnerName);\n      //     return;\n      // }\n\n\n      if(this.addBankCard.bankname == \"\"){\n          this.showPopup(\"\",this.translateObj.warBankName);\n          return;\n      }\n\n      if(this.addBankCard.branchName == \"\"){\n          this.showPopup(\"\", this.translateObj.warBankAddress);\n          return;\n      }\n\n      // if(!address.test(this.addBankCard.branchName) && !address2.test(this.addBankCard.branchName)){\n      this.addBankCard.branchName = this.addBankCard.branchName.replace(/\\s+/g,\"\");\n      if(this.addBankCard.branchName==\"\"){\n          this.showPopup(\"\", this.translateObj.warBankAddress2);\n          return;\n      }\n      this.mineser.addBankCard(this.addBankCard).then(success => {\n\n              if (success != null) {\n                  if(success.ret_code== 1){\n                      this.commonUtils.showToast(this.translateObj.bindSuccess);\n                      this.navCtrl.push(\"BankcardPage\");\n                  }else {\n                      this.showPopup(\"\",success.ret_msg)\n                  }\n              } else {\n                  this.showPopup(\"\", this.translateObj.serviceErr);\n              }\n          },\n          error => {\n              this.showPopup(\"\", this.translateObj.netErr);\n          });\n  }\n  goBack(){\n    this.navCtrl.pop();\n  }\n  reset(){\n      this.addBankCard = {\n          account:'',name:'',bankname:'',branchName:'',userId:'11111'\n      };\n  }\n  ionViewDidLoad() {\n        this.ientityAuth.userIdentity().then((res)=>{\n                console.log(res);\n                if(res.ret_code=='1'){\n                    this.addBankCard.name =  res.data.idName\n                }\n\n            }\n        ).catch(err=>{\n            console.log(err)\n        })\n\n    }\n    showPopup(title, text) {\n        this.alert = this.alertCtrl.create({\n            title: title,\n            subTitle: text,\n            buttons: [\n                {\n                    text: this.translateObj.confirm,\n                    handler: data => {\n                        if (this.createSuccess) {\n                            this.navCtrl.popToRoot();\n                        }\n                    }\n                }\n            ]\n        });\n        this.alert.present();\n    }\n    XZlx(acc){\n      if(acc){\n          this.account1 = acc.replace(/[^\\d]/g,'');\n          if(acc.length>19){\n              this.account1  =acc.substring(0,19);\n\n          }\n      }\n\n    }\n    XZlxBC(acc){\n        if(acc){\n            this.addBankCard.account =acc.replace(/[^\\d]/g,'');\n            if(acc.length>19){\n                this.addBankCard.account =acc.substring(0,19);\n            }\n        }\n\n    }\n    bankNameValid(bankname){\n        console.log(bankname.length);\n        if(bankname.length>25){\n         this.addBankCard.bankname = bankname.substring(0,25);\n        }\n    }\n    BranchNameValid(branchName){\n        console.log(branchName.length);\n        if(branchName.length>50){\n            this.addBankCard.branchName = branchName.substring(0,50);\n        }\n    }\n\n    ionViewWillLeave(){\n        if(this.alert){\n            this.alert.dismiss();\n        }\n        if(this.loading){\n            this.loading.dismiss();\n        }\n        // if(this.actionSheet){\n        //     this.actionSheet.dismiss();\n        // }\n        // if(this.modal){\n        //     this.modal.dismiss();\n        // }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mine/bankcard-add/bankcard-add.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport {  BankcardAddPage } from './bankcard-add';\nimport { TranslateModule} from 'ng2-translate';\n\n@NgModule({\n  declarations: [\n    BankcardAddPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BankcardAddPage),TranslateModule\n  ],\n})\nexport class BankcardAddPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mine/bankcard-add/bankcard-add.module.ts"],"sourceRoot":""}