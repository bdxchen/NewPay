{"version":3,"sources":["../../src/pages/mine/bankcard/bankcard.ts","../../src/pages/mine/bankcard/bankcard.module.ts"],"names":[],"mappings":"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","file":"21.js","sourcesContent":["import { Component } from '@angular/core';\nimport {IonicPage, NavController, ActionSheetController, AlertController, Alert} from 'ionic-angular';\nimport {MineService} from \"../../../providers/user-service/mine-service\";\nimport {DelegatingHost} from \"@angular/tsc-wrapped/src/compiler_host\";\nimport {DeleteBankCard} from \"../../../providers/messages/user-auth-msg\";\nimport {CommonUtils} from '../../../providers/common/commonUtils';\nimport {TranslateService} from 'ng2-translate';\n\n@IonicPage()\n@Component({\n    selector: 'page-bankcard',\n    templateUrl: 'bankcard.html'\n})\nexport class BankcardPage {\n\n    flag:number =0;\n    indexTags: Array<{DeleteBankCard}> =[];\n    deleteBankCard : DeleteBankCard =  { account :'',name :'',bankname:'',branchName:'',time:''};\n    translateObj: any;\n    alert:Alert;\n    constructor(public navCtrl: NavController\n        ,public actionSheetCtrl: ActionSheetController\n        ,public mineser:MineService,\n                public alertCtrl:AlertController,\n                public commonUtils:CommonUtils,\n                public translate:TranslateService\n    ) {\n\n        this.showBankCrad();\n        this.translate.get('bankcard').subscribe((res: any) => {\n            this.translateObj = res;\n        });\n    }\n    goBack(){\n        this.navCtrl.parent.select(2);\n    }\n    goBankcardAddPage(){\n        this.navCtrl.push(\"BankcardAddPage\")\n    }\n    deleteCard(tag){\n        this.deleteBankCard =tag;\n        console.log(\"删除银行卡\")\n        this.showConfirm(tag)\n    }\n    showConfirm(tag) {\n        this.alert = this.alertCtrl.create({\n            title: '',\n            message: this.translateObj.unbindWarning + tag.account.substring(tag.account.length - 4) + '?',\n            enableBackdropDismiss: false,\n            buttons: [\n                {\n                    text: this.translateObj.cancel,\n                    handler: () => {\n                        console.log('Disagree clicked');\n\n                    }\n                },\n                {\n                    text: this.translateObj.confirm,\n                    handler: () => {\n                        console.log('Agree clicked');\n                        this.commonUtils.showLoading()\n                        this.mineser.deleteBankCard(this.deleteBankCard).then(retData => {\n                                this.commonUtils.HideLoading();\n                                if (retData != null) {\n\n                                    if (retData.ret_code == \"1\") {\n                                        this.mineser.bankCardcclist().then(retData => {\n                                                debugger\n                                                if (retData != null) {\n                                                    if (retData.ret_code == 1) {\n                                                        if (retData.data.length > 0) {\n                                                            this.flag = 1;\n                                                            this.indexTags = retData.data;\n                                                        } else if (retData.data.length == 0) {\n                                                            this.flag = 0;\n                                                            this.indexTags = [];\n                                                        }\n\n                                                    }\n                                                } else {\n                                                    console.log(\"ret_code = 0\" + JSON.stringify(retData));\n                                                }\n                                            },\n                                            error => {\n                                                this.commonUtils.HideLoading();\n                                                console.log(\"get frieds err\");\n                                            });\n                                    }\n                                } else {\n                                    console.log(\"ret_code = 0\" + JSON.stringify(retData));\n                                }\n                            },\n                            error => {\n                                this.commonUtils.HideLoading();\n                                console.log(\"get frieds err\");\n                            });\n                    }\n                }\n            ]\n        });\n        this.alert.present();\n    }\n\n    showBankCrad() {\n        this.mineser.bankCardcclist().then(retData => {\n                if (retData != null) {\n                    if (retData.ret_code == 1) {\n                        console.log(retData.ret_code)\n                        if (retData.data.length > 0) {\n                            this.flag = 1;\n                            // for (let i = 0; i < retData.data.length; i++) {\n                            //     let temp = [];\n                                // retData.data[i].cardNumber = retData.data[i].account;//拷贝account的值到cardNumber方便回传\n\n                                // for (let j = 0; j < retData.data[i].account.length; j++) {\n                                //     let len = retData.data[i].account.length;\n                                //     if (j >= 0 && j < 4) {\n                                //         temp.push(retData.data[i].account[j])\n                                //     }else if(j>=4 &&  j<len-4){\n                                //         temp.push(\"*\");\n                                //     }else if(j>=len-4 && j<len){\n                                //         if(len-4==j){\n                                //             temp.push(\" \");\n                                //             temp.push(retData.data[i].account[j]);\n                                //         }else{\n                                //             temp.push(retData.data[i].account[j]);\n                                //         }\n                                //\n                                //     }\n                                //\n                                // }\n                                // console.log(temp)\n                                // let str=temp.join(\"\").replace(/(\\d{4})/g,'$1 ').replace(/\\s*$/,'');\n                                // retData.data[i].account = str;\n\n                            // }\n                            this.indexTags = retData.data;\n                        }else if(retData.data.length==0){\n                            this.flag=0;\n                            this.indexTags = retData.data;\n                        }\n\n                    }\n                }else {\n                    console.log(\"ret_code = 0\" + JSON.stringify(retData));\n                }\n            },\n            error => {\n                console.log(\"get frieds err\");\n            });\n    }\n    ionViewWillLeave(){\n        if(this.alert){\n            this.alert.dismiss();\n        }\n        // if(this.loading){\n        //     this.loading.dismiss();\n        // }\n        // if(this.actionSheet){\n        //     this.actionSheet.dismiss();\n        // }\n        // if(this.modal){\n        //     this.modal.dismiss();\n        // }\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mine/bankcard/bankcard.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BankcardPage } from './bankcard';\nimport { TranslateModule} from 'ng2-translate';\n\n@NgModule({\n  declarations: [\n    BankcardPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BankcardPage),TranslateModule\n  ],\n})\nexport class BankcardPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mine/bankcard/bankcard.module.ts"],"sourceRoot":""}